---
image: node:10-alpine

variables:
# https://docs.gitlab.com/ce/ci/variables/README.html
  app_version: $CI_COMMIT_REF_SLUG-$CI_COMMIT_SHA
  registry_image: $CI_REGISTRY_IMAGE
  branch_or_tag: $CI_COMMIT_REF_NAME
  DOCKER_HOST: tcp://localhost:2375

stages:
  - info
  - "build and push base image"
  - "build and push base-dependencies image"
  - "build and push tremplin images"

info:
  stage: info
  image: docker:latest
  script:
    - docker --version

include:
  - local: '/scripts/build/.gitlab-ci/build.gitlab-ci.yml'
